# TestovoeArmyClash

Прототип автобоевой системы с расширяемой архитектурой, визуальными модификаторами юнитов и интерактивной способностью игрока — **орбитальным лазером**.
Затрачено времени - 10 ч.

3 часа - продумывание архитектуры
5 часов - работа со сценой, UI, кодом
2 часа - документирование

---
##  Основная концепция

На сцене автоматически сражаются две армии юнитов.  
Игрок не управляет юнитами напрямую, но может **вмешиваться в бой** с помощью лазера, нанося точечный урон выбранным целям.

---

##  Особенности реализации:
1. Проект минимизирует использование физического движка. Определение столкновений происходит упрощенным способом, увеличивая производительность.
2. Object Pool подразумевается в подобных играх, но в рамках ТЗ избыточен  

---

##  Ключевые механики

###  Автобой
- Юниты двух армий автоматически движутся навстречу друг другу  
- Бой происходит на дистанции, определяемой боевыми радиусами  
- Атака выполняется по таймеру (`Attack Cooldown`)

---

###  Логика выбора целей (линейное противостояние)

Юниты выбирают цель по принципу строя:

1. В первую очередь атакуется враг с тем же индексом в противоположной армии  
2. Если он мёртв — поиск продолжается:
   - индекс ниже  
   - индекс выше  
   - дальше по расширяющемуся радиусу  
3. Если юнит атакован другим врагом — он **переключается на атакующего**

Создаётся ощущение «линия против линии», а не хаотичной свалки.

---

###  Избегание наложения
Юниты имеют боевой радиус и:
- не проходят друг сквозь друга  
- формируют естественную линию фронта  
- крупные юниты физически занимают больше пространства  

---

###  Ориентация в бою
Каждый юнит всегда повёрнут в сторону своей текущей цели.

---

##  Особая фича — Лазер игрока

### Идея механики:
- В конечной версии, лазер расходует некоторую валюту, т.е игрок может использовать его нужное количество времени, потратив соответствующее количество валюты
- В психологической модели игрока - лазер - контроль сложности. Т.е игрок, имея более слабую армию (или стратегию), может повысить свои шансы на победу, используя лазер, тем самым снизив уровень сложности конкретного боя до приемлемого, обеспечивая состояние потока, когда игра сложная, но проходимая для игрока
- В экономической модели - использование лазера тратит ресурсы, уменьшая эти ресурсы на прокачку армии. Таким образом, в определенный момент времени игроку придется докупать валюту, либо смотреть рекламу, чтобы компенсировать потерю ресурсов


### Как работает:

- При нажатии мышью (или касании на мобильном)
- Из верхней части экрана появляется лазерный луч
- Юнит под курсором получает заданный урон каждый заданный интервал времени**
- При перемещении пальца урон переключается на нового юнита
- Если палец убран — урон прекращается

### Чем механика выделяет игру:
- Чувство контроля поверх автобоя дает игроку возможность самостоятельно выбирать сложность прохождения (количество повторных прохождений) того или иного уровня
- В финальной версии должна быть обеспечена зрелищность, за счет настройки эффектов  
- Тактическое вмешательство без микроменеджмента. Механика проста в понимании, использование интуитивно понятно.  
- Можно использовать при любом количестве ресурсов >0

### Личное мнение:

В подобных играх важнее точно просчитать баланс, и экономическую систему, а также дать игроку мотивацию играть дальше некоторой тайной - закрытые до определенного уровня войска, уникальные боссы, бестиарий боссов, и т.п
Соответственно - хороший визуал, простое обучение и яркие эффекты уничтожения также играют большую роль.
Дополнительные механики сложно просчитать без окончательного понимания сеттинга и гейм-дизайна конечной игры.
---

##  Архитектура

Используется гибридный подход:  

> **ScriptableObject + MVC + Strategy**

Данный подход был выбран по следующим причинам:
1. Легко добавлять новые функции
2. Весь баланс игры легко настраивается гейм дизайнером через конфиги SO
3. Простое расширение архитектуры и создание новых типов юнитов


---

###  Model (чистая логика, без Unity)

| Класс | Назначение |
|------|------------|
| `UnitModel` | Здоровье, урон, цель, атакующий |
| `ArmyModel` | Список юнитов |
| `UnitStats` | Боевые характеристики |
| `LaserDamageModel` | Логика периодического урона лазера |

---

###  View (только отображение)

| Класс | Назначение |
|------|------------|
| `UnitView` | Визуал юнита, поворот, масштаб, цвет |
| `LaserView` | Визуал луча (`LineRenderer`) |

---

###  Controller (поведение и логика сцены)

| Класс | Ответственность |
|------|------------------|
| `UnitController` | Движение, атака, разделение, поворот |
| `BattleController` | Обновление логики боя |
| `LaserController` | Ввод игрока, рейкаст, применение урона |

---

###  Strategy

| Интерфейс / Класс | Назначение |
|------------------|------------|
| `ITargetSelector` | Интерфейс выбора цели |
| `IndexedFrontTargetSelector` | Реализация логики «напротив по индексу» |

Позволяет менять логику выбора целей без изменения юнитов.

---

##  Data-Driven модификаторы (ScriptableObject)

Юниты создаются из комбинации модификаторов:

| Тип модификатора | Что меняет |
|------------------|------------|
| **Size Modifier** | Масштаб юнита и боевой радиус |
| **Color Modifier** | Цвет материала |
| **Form Modifier** | Префаб формы (куб / сфера) |

Добавление нового типа юнита не требует изменения кода — только создание новых ScriptableObject.

---



